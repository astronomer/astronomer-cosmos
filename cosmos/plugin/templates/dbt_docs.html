{% extends base_template %}
{% block content %}
    <script src="{{ url_for('.static', filename='iframeResizer.min.js') }}"></script>
    <iframe id="dbtIframe" src="{{ url_for('.dbt_docs_index') }}" style="min-width: 100%; border: 0;"></iframe>
    <script>
        iFrameResize(
            {
                heightCalculationMethod: 'custom',
                resizeFrom: 'child',
                minHeight: 500
            },
            '#dbtIframe'
        );

        window.addEventListener('message', function (event) {
            let msgData = event.data;
            if (msgData.startsWith('#!')) {
                let updateUrl = new URL(window.location);
                updateUrl.hash = msgData;
                history.pushState(null, null, updateUrl);
            }
        }, false);

        let dbtIframe = document.getElementById('dbtIframe');
        dbtIframe.src = dbtIframe.src + window.location.hash;
    </script>
{% endblock %}
